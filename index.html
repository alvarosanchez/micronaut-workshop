<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Alvaro Sanchez-Mariscal">
<title>Micronaut Workshop</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
pre.pygments .hll { background-color: #ffffcc }
pre.pygments { background: #f8f8f8; }
pre.pygments .tok-c { color: #3D7B7B; font-style: italic } /* Comment */
pre.pygments .tok-err { border: 1px solid #FF0000 } /* Error */
pre.pygments .tok-k { color: #008000; font-weight: bold } /* Keyword */
pre.pygments .tok-o { color: #666666 } /* Operator */
pre.pygments .tok-ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
pre.pygments .tok-cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
pre.pygments .tok-cp { color: #9C6500 } /* Comment.Preproc */
pre.pygments .tok-cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
pre.pygments .tok-c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
pre.pygments .tok-cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
pre.pygments .tok-gd { color: #A00000 } /* Generic.Deleted */
pre.pygments .tok-ge { font-style: italic } /* Generic.Emph */
pre.pygments .tok-gr { color: #E40000 } /* Generic.Error */
pre.pygments .tok-gh { color: #000080; font-weight: bold } /* Generic.Heading */
pre.pygments .tok-gi { color: #008400 } /* Generic.Inserted */
pre.pygments .tok-go { color: #717171 } /* Generic.Output */
pre.pygments .tok-gp { color: #000080; font-weight: bold } /* Generic.Prompt */
pre.pygments .tok-gs { font-weight: bold } /* Generic.Strong */
pre.pygments .tok-gu { color: #800080; font-weight: bold } /* Generic.Subheading */
pre.pygments .tok-gt { color: #0044DD } /* Generic.Traceback */
pre.pygments .tok-kc { color: #008000; font-weight: bold } /* Keyword.Constant */
pre.pygments .tok-kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
pre.pygments .tok-kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
pre.pygments .tok-kp { color: #008000 } /* Keyword.Pseudo */
pre.pygments .tok-kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
pre.pygments .tok-kt { color: #B00040 } /* Keyword.Type */
pre.pygments .tok-m { color: #666666 } /* Literal.Number */
pre.pygments .tok-s { color: #BA2121 } /* Literal.String */
pre.pygments .tok-na { color: #687822 } /* Name.Attribute */
pre.pygments .tok-nb { color: #008000 } /* Name.Builtin */
pre.pygments .tok-nc { color: #0000FF; font-weight: bold } /* Name.Class */
pre.pygments .tok-no { color: #880000 } /* Name.Constant */
pre.pygments .tok-nd { color: #AA22FF } /* Name.Decorator */
pre.pygments .tok-ni { color: #717171; font-weight: bold } /* Name.Entity */
pre.pygments .tok-ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
pre.pygments .tok-nf { color: #0000FF } /* Name.Function */
pre.pygments .tok-nl { color: #767600 } /* Name.Label */
pre.pygments .tok-nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
pre.pygments .tok-nt { color: #008000; font-weight: bold } /* Name.Tag */
pre.pygments .tok-nv { color: #19177C } /* Name.Variable */
pre.pygments .tok-ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
pre.pygments .tok-w { color: #bbbbbb } /* Text.Whitespace */
pre.pygments .tok-mb { color: #666666 } /* Literal.Number.Bin */
pre.pygments .tok-mf { color: #666666 } /* Literal.Number.Float */
pre.pygments .tok-mh { color: #666666 } /* Literal.Number.Hex */
pre.pygments .tok-mi { color: #666666 } /* Literal.Number.Integer */
pre.pygments .tok-mo { color: #666666 } /* Literal.Number.Oct */
pre.pygments .tok-sa { color: #BA2121 } /* Literal.String.Affix */
pre.pygments .tok-sb { color: #BA2121 } /* Literal.String.Backtick */
pre.pygments .tok-sc { color: #BA2121 } /* Literal.String.Char */
pre.pygments .tok-dl { color: #BA2121 } /* Literal.String.Delimiter */
pre.pygments .tok-sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
pre.pygments .tok-s2 { color: #BA2121 } /* Literal.String.Double */
pre.pygments .tok-se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
pre.pygments .tok-sh { color: #BA2121 } /* Literal.String.Heredoc */
pre.pygments .tok-si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
pre.pygments .tok-sx { color: #008000 } /* Literal.String.Other */
pre.pygments .tok-sr { color: #A45A77 } /* Literal.String.Regex */
pre.pygments .tok-s1 { color: #BA2121 } /* Literal.String.Single */
pre.pygments .tok-ss { color: #19177C } /* Literal.String.Symbol */
pre.pygments .tok-bp { color: #008000 } /* Name.Builtin.Pseudo */
pre.pygments .tok-fm { color: #0000FF } /* Name.Function.Magic */
pre.pygments .tok-vc { color: #19177C } /* Name.Variable.Class */
pre.pygments .tok-vg { color: #19177C } /* Name.Variable.Global */
pre.pygments .tok-vi { color: #19177C } /* Name.Variable.Instance */
pre.pygments .tok-vm { color: #19177C } /* Name.Variable.Magic */
pre.pygments .tok-il { color: #666666 } /* Literal.Number.Integer.Long */
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1><span class="image"><img src="https://raw.githubusercontent.com/micronaut-projects/static-website/gh-pages/images/favicon-32x32.png" alt="favicon 32x32"></span> <a href="https://alvarosanchez.github.io/micronaut-workshop/">Micronaut Workshop</a></h1>
<div class="details">
<span id="author" class="author">Alvaro Sanchez-Mariscal</span><br>
<span id="email" class="email"><a href="mailto:alvaro.sanchezmariscal@gmail.com">alvaro.sanchezmariscal@gmail.com</a></span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_software_requirements">Software Requirements</a>
<ul class="sectlevel2">
<li><a href="#_clone_this_repository">Clone this repository</a></li>
</ul>
</li>
<li><a href="#_application_architecture">Application architecture</a></li>
<li><a href="#_getting_started_with_micronaut_and_graalvm_30_minutes">1. Getting started with Micronaut and GraalVM (30 minutes)</a>
<ul class="sectlevel2">
<li><a href="#_using_micronaut_launch_to_create_a_new_application_5_minutes">1.1. Using Micronaut Launch to create a new application (5 minutes)</a></li>
<li><a href="#_running_the_application_with_the_micronaut_maven_plugin_5_minutes">1.2. Running the application with the Micronaut Maven Plugin (5 minutes)</a></li>
<li><a href="#_creating_a_hello_world_controller_5_minutes">1.3. Creating a Hello World controller (5 minutes)</a></li>
<li><a href="#_testing_the_application_5_minutes">1.4. Testing the application (5 minutes)</a></li>
<li><a href="#_generating_a_native_executable_5_minutes">1.5. Generating a native executable (5 minutes)</a></li>
<li><a href="#_exploring_the_micronaut_control_panel_5_minutes">1.6. Exploring the Micronaut Control Panel (5 minutes)</a></li>
</ul>
</li>
<li><a href="#_implementing_a_data_access_layer_with_micronaut_data_jdbc_60_minutes">2. Implementing a data access layer with Micronaut Data JDBC (60 minutes)</a>
<ul class="sectlevel2">
<li><a href="#_preparing_the_project_15_minutes">2.1. Preparing the project (15 minutes)</a></li>
<li><a href="#_implementing_the_data_access_layer_15_minutes">2.2. Implementing the data access layer (15 minutes)</a></li>
<li><a href="#_implementing_the_rest_api_15_minutes">2.3. Implementing the REST API (15 minutes)</a></li>
<li><a href="#_completing_the_rest_api_15_minutes">2.4. Completing the REST API (15 minutes)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<a href="https://github.com/alvarosanchez/micronaut-workshop"><img style="position: fixed; top: 0; right: 0; border: 0;" src="https://github.blog/wp-content/uploads/2008/12/forkme_right_red_aa0000.png" alt="Fork me on GitHub" data-canonical-src=https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/GitHub_forkme_ribbon_right_green.svg/2048px-GitHub_forkme_ribbon_right_green.svg.png"></a>
<div class="paragraph">
<p>Introductory workshop about <a href="http://micronaut.io">Micronaut</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_software_requirements">Software Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to do this workshop, you need the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Linux, MacOS or Windows with WSL and shell access, with the following installed:</p>
<div class="ulist">
<ul>
<li>
<p><code>curl</code>.</p>
</li>
<li>
<p><code>wget</code>.</p>
</li>
<li>
<p><code>unzip</code>.</p>
</li>
<li>
<p><code>git</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://www.graalvm.org/downloads">Oracle GraalVM for JDK 21</a>.</p>
<div class="ulist">
<ul>
<li>
<p>Recommended to be installed with <a href="https://sdkman.io">SDKMAN!</a>: <code>sdk install java 21.0.3-graal</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A valid Docker environment with the following image pulled: <code>postgres:latest</code>.</p>
</li>
<li>
<p>Ensure that the current JDK is GraalVM for Java 21:</p>
<div class="literalblock">
<div class="content">
<pre>$ java -version
java version "21.0.3" 2024-04-16 LTS
Java(TM) SE Runtime Environment Oracle GraalVM 21.0.3+7.1 (build 21.0.3+7-LTS-jvmci-23.1-b37)
Java HotSpot(TM) 64-Bit Server VM Oracle GraalVM 21.0.3+7.1 (build 21.0.3+7-LTS-jvmci-23.1-b37, mixed mode, sharing)</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_clone_this_repository">Clone this repository</h3>
<div class="paragraph">
<p>Once done, you can clone this repo:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>git clone https://github.com/alvarosanchez/micronaut-workshop.git</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will find each lab&#8217;s template files on each <code>labNN</code> folder. Solution is always inside a <code>solution</code> folder.
To highlight the actions you actually need to perform, an icon is used: <span class="icon"><i class="fa fa-hand-o-right"></i></span>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_architecture">Application architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Throughout this workshop, you will be creating a football (soccer) management system.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/football-diagram.png" alt="football diagram">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>clubs</code> is the microservice responsible for managing clubs. It uses Micronaut Data JPA as a data access layer.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started_with_micronaut_and_graalvm_30_minutes">1. Getting started with Micronaut and GraalVM (30 minutes)</h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Change to the <code>lab01</code> directory to work on this exercise
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are multiple ways to create a new Micronaut application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Using the <a href="https://micronaut.io/launch/">Micronaut Launch</a> web application.</p>
</li>
<li>
<p>Using the <a href="https://micronaut-projects.github.io/micronaut-starter/latest/guide/#installation">Micronaut <code>mn</code> CLI</a>.</p>
</li>
<li>
<p>Using <code>curl</code> against the <code>launch.micronaut.io</code> API to download a ZIP.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="_using_micronaut_launch_to_create_a_new_application_5_minutes">1.1. Using Micronaut Launch to create a new application (5 minutes)</h3>
<div class="paragraph">
<p>We will use the third option, so that you can copy/paste the commands.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> To see the options available, run:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl https://launch.micronaut.io</pre>
</div>
</div>
<div class="paragraph">
<p>Micronaut Launch uses <em>features</em> as building blocks to create a new application. Features can contribute to the
application in different ways, such as adding build dependencies, configuration properties, sample code, etc.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Let&#8217;s create a new application with the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl 'https://launch.micronaut.io/create/default/com.example.micronaut.hello?lang=JAVA&amp;build=MAVEN&amp;test=JUNIT&amp;javaVersion=JDK_21&amp;features=graalvm&amp;features=control-panel' --output hello.zip</pre>
</div>
</div>
<div class="paragraph">
<p>You can now unzip the file and open the resulting folder in your IDE.</p>
</div>
</div>
<div class="sect2">
<h3 id="_running_the_application_with_the_micronaut_maven_plugin_5_minutes">1.2. Running the application with the Micronaut Maven Plugin (5 minutes)</h3>
<div class="paragraph">
<p>The <a href="https://github.com/micronaut-projects/micronaut-maven-plugin">Micronaut Maven Plugin</a> provides a convenient way to
run your application from the command line.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> To run the application, execute:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./mvnw mn:run</pre>
</div>
</div>
<div class="paragraph">
<p>You can leave the application running while you work on the rest of the exercise, since the plugin will automatically
restart the application when it detects changes in the source code.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Micronaut applications can also be run from the IDE. Refer to the <a href="https://docs.micronaut.io/latest/guide/index.html#ideSetup">IDE Setup</a> section of the Micronaut documentation for more details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_hello_world_controller_5_minutes">1.3. Creating a Hello World controller (5 minutes)</h3>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Create a new controller with a single endpoint <code>/hello/{name}</code> that returns a greeting message using
the provided path variable.</p>
</div>
<details>
<summary class="title">Click to expand</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@Controller</span><span class="tok-w"> </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-kd">public</span><span class="tok-w"> </span><span class="tok-kd">class</span> <span class="tok-nc">HelloController</span><span class="tok-w"> </span><span class="tok-p">{</span>

<span class="tok-w">    </span><span class="tok-nd">@Get</span><span class="tok-p">(</span><span class="tok-s">&quot;/hello/{name}&quot;</span><span class="tok-p">)</span><span class="tok-w"> </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-w">    </span><span class="tok-kd">public</span><span class="tok-w"> </span><span class="tok-n">String</span><span class="tok-w"> </span><span class="tok-nf">sayHello</span><span class="tok-p">(</span><span class="tok-n">String</span><span class="tok-w"> </span><span class="tok-n">name</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-p">{</span><span class="tok-w"> </span><i class="conum" data-value="3"></i><b>(3)</b>
<span class="tok-w">        </span><span class="tok-k">return</span><span class="tok-w"> </span><span class="tok-s">&quot;Hello &quot;</span><span class="tok-w"> </span><span class="tok-o">+</span><span class="tok-w"> </span><span class="tok-n">name</span><span class="tok-p">;</span>

<span class="tok-w">    </span><span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@Controller</code> annotation marks this class as a controller on the default <code>/</code> route.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>@Get</code> annotation marks this method as a <code>GET</code> endpoint on the <code>/hello/{name}</code> route</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The <code>name</code> parameter matches the path variable in the route. A typo in either of them will result in a compilation
error.</td>
</tr>
</table>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_testing_the_application_5_minutes">1.4. Testing the application (5 minutes)</h3>
<div class="paragraph">
<p>Since the application is still running, you can test it using <code>curl</code>:</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Open a new terminal and run:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl http://localhost:8080/hello/World</pre>
</div>
</div>
<div class="paragraph">
<p>While manual testing is useful, writing an automated functional test is even better. Micronaut provides a super-fast
and convenient way to write functional tests using the <a href="https://micronaut-projects.github.io/micronaut-test/latest/guide/">Micronaut Test</a> library.</p>
</div>
<div class="paragraph">
<p>Generated applications include a sample test that asserts that the application startups successfully.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Open <code>src/test/java/com/example/micronaut/HelloTest.java</code> and add a new test that asserts that the
<code>/hello/{name}</code> endpoint returns a greeting message.</p>
</div>
<details>
<summary class="title">Click to expand</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@MicronautTest</span>
<span class="tok-kd">class</span> <span class="tok-nc">HelloTest</span><span class="tok-w"> </span><span class="tok-p">{</span>

<span class="tok-w">    </span><span class="tok-nd">@Inject</span>
<span class="tok-w">    </span><span class="tok-n">EmbeddedApplication</span><span class="tok-o">&lt;?&gt;</span><span class="tok-w"> </span><span class="tok-n">application</span><span class="tok-p">;</span>

<span class="tok-w">    </span><span class="tok-nd">@Inject</span>
<span class="tok-w">    </span><span class="tok-nd">@Client</span><span class="tok-p">(</span><span class="tok-s">&quot;/&quot;</span><span class="tok-p">)</span><span class="tok-w"> </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-w">    </span><span class="tok-n">HttpClient</span><span class="tok-w"> </span><span class="tok-n">client</span><span class="tok-p">;</span>

<span class="tok-w">    </span><span class="tok-nd">@Test</span>
<span class="tok-w">    </span><span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">testItWorks</span><span class="tok-p">()</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">        </span><span class="tok-n">Assertions</span><span class="tok-p">.</span><span class="tok-na">assertTrue</span><span class="tok-p">(</span><span class="tok-n">application</span><span class="tok-p">.</span><span class="tok-na">isRunning</span><span class="tok-p">());</span>
<span class="tok-w">    </span><span class="tok-p">}</span>

<span class="tok-w">    </span><span class="tok-nd">@Test</span>
<span class="tok-w">    </span><span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">testSayHello</span><span class="tok-p">()</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">        </span><span class="tok-n">String</span><span class="tok-w"> </span><span class="tok-n">response</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-n">client</span><span class="tok-p">.</span><span class="tok-na">toBlocking</span><span class="tok-p">().</span><span class="tok-na">retrieve</span><span class="tok-p">(</span><span class="tok-s">&quot;/hello/World&quot;</span><span class="tok-p">);</span>
<span class="tok-w">        </span><span class="tok-n">assertEquals</span><span class="tok-p">(</span><span class="tok-s">&quot;Hello World&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">response</span><span class="tok-p">);</span>
<span class="tok-w">    </span><span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@Client("/")</code> annotation will inject an HTTP client connected to the embedded server random port.</td>
</tr>
</table>
</div>
</div>
</details>
<div class="paragraph">
<p>Before running the test, let&#8217;s add a Logback logger to see the details of the HTTP client.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Open <code>src/main/resources/logback.xml</code> and add the following logger:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-nt">&lt;logger</span><span class="tok-w"> </span><span class="tok-na">name=</span><span class="tok-s">&quot;io.micronaut.http.client&quot;</span><span class="tok-w"> </span><span class="tok-na">level=</span><span class="tok-s">&quot;trace&quot;</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Now you can run the test from your IDE or from the command line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./mvnw test</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_generating_a_native_executable_5_minutes">1.5. Generating a native executable (5 minutes)</h3>
<div class="paragraph">
<p>Micronaut applications can be compiled to native executables using GraalVM. This allows you to create a single
self-contained executable that can be run without a JVM.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> To generate a native executable, run:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./mvnw package -Dpackaging=native-image</pre>
</div>
</div>
<div class="paragraph">
<p>On modern hardware, this should take about one minute.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Once finished, you can run the executable:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>./target/hello</pre>
</div>
</div>
<div class="paragraph">
<p>You will see that Micronaut starts in a few milliseconds.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Test the application again with <code>curl</code>:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl http://localhost:8080/hello/World</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exploring_the_micronaut_control_panel_5_minutes">1.6. Exploring the Micronaut Control Panel (5 minutes)</h3>
<div class="paragraph">
<p>The Micronaut Control Panel module provides a web UI that allows you to view and manage the state of your Micronaut
application, typically in a development environment.</p>
</div>
<div class="paragraph">
<p>The <code>control-panel</code> feature was added when we created the application using Micronaut Launch, so all you need to do is
run the application and open a browser and navigate to <a href="http://localhost:8080/control-panel" class="bare">http://localhost:8080/control-panel</a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://micronaut-projects.github.io/micronaut-control-panel/latest/img/control-panel.png" alt="control panel">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_a_data_access_layer_with_micronaut_data_jdbc_60_minutes">2. Implementing a data access layer with Micronaut Data JDBC (60 minutes)</h2>
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Change to the <code>lab02</code> directory to work on this exercise
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this exercise, you will create a data access layer
using <a href="https://micronaut-projects.github.io/micronaut-data/latest/guide/">Micronaut Data JDBC</a>. This library provides a
convenient way to create repositories that can be used to perform CRUD operations on a database.</p>
</div>
<div class="paragraph">
<p>For development and testing on a real database, we are going to use <a href="https://www.postgresql.org/">PostgreSQL</a> via
<a href="https://micronaut-projects.github.io/micronaut-test-resources/latest/guide/">Micronaut Test Resources</a>.</p>
</div>
<div class="sect2">
<h3 id="_preparing_the_project_15_minutes">2.1. Preparing the project (15 minutes)</h3>
<div class="paragraph">
<p>Before going any further, make sure you have a recent version of <code>postgres:latest</code> pulled in your Docker environment.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Execute the following command</p>
</div>
<div class="literalblock">
<div class="content">
<pre>docker pull postgres:latest</pre>
</div>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Now, create a new application:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>curl 'https://launch.micronaut.io/create/default/com.example.micronaut.clubs?lang=JAVA&amp;build=MAVEN&amp;test=JUNIT&amp;javaVersion=JDK_21&amp;features=graalvm&amp;features=data-jdbc&amp;features=postgres' --output clubs.zip</pre>
</div>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Unzip <code>clubs.zip</code> and import the project in your IDE.</p>
</div>
<div class="paragraph">
<p>Also, to set up the schema and add some sample data, we are going to use
<a href="https://micronaut-projects.github.io/micronaut-test/latest/guide/#sql">Micronaut Test&#8217;s <code>@Sql</code></a> annotation.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Create the following migration files:</p>
</div>
<details>
<summary class="title">Click to expand</summary>
<div class="content">
<div class="listingblock">
<div class="title"><code>src/main/resources/create.sql</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-k">create</span><span class="tok-w"> </span><span class="tok-k">table</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">id</span><span class="tok-w"> </span><span class="tok-nb">SERIAL</span><span class="tok-w"> </span><span class="tok-k">PRIMARY</span><span class="tok-w"> </span><span class="tok-k">KEY</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">name</span><span class="tok-w"> </span><span class="tok-nb">TEXT</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-w"> </span><span class="tok-nb">TEXT</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>src/main/resources/data.sql</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Real Madrid&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Santiago Bernabu&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;FC Barcelona&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Camp Nou&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Manchester United&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Old Trafford&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Chelsea&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Stamford Bridge&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Paris Saint-Germain&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Parc des Princes&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Olympique de Marseille&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Stade Vlodrome&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Bayern Munich&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Allianz Arena&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Borussia Dortmund&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Signal Iduna Park&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Juventus&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Juventus Stadium&#39;</span><span class="tok-p">);</span>
<span class="tok-k">insert</span><span class="tok-w"> </span><span class="tok-k">into</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">(</span><span class="tok-n">name</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">stadium</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-k">values</span><span class="tok-w"> </span><span class="tok-p">(</span><span class="tok-s1">&#39;Inter Milan&#39;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s1">&#39;Giuseppe Meazza&#39;</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>src/main/resources/clean.sql</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="sql"><span></span><span class="tok-k">drop</span><span class="tok-w"> </span><span class="tok-k">table</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">;</span></code></pre>
</div>
</div>
</div>
</details>
<div class="paragraph">
<p>Also, to prevent Micronaut Data&#8217;s built-in schema generation to conflict with the schema we are going to create, you need
to remove the following line from <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="properties"><span></span><span class="tok-na">datasources.default.schema-generate</span><span class="tok-o">=</span><span class="tok-s">CREATE_DROP</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_implementing_the_data_access_layer_15_minutes">2.2. Implementing the data access layer (15 minutes)</h3>
<div class="paragraph">
<p>For the data access layer, we are going to use the <a href="https://micronaut-projects.github.io/micronaut-data/latest/guide/#jdbc">Micronaut Data</a> library in its JDBC flavour. In the source code, we will use
standard JPA annotations.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Add the following dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-nt">&lt;dependency&gt;</span>
<span class="tok-w">  </span><span class="tok-nt">&lt;groupId&gt;</span>jakarta.persistence<span class="tok-nt">&lt;/groupId&gt;</span>
<span class="tok-w">  </span><span class="tok-nt">&lt;artifactId&gt;</span>jakarta.persistence-api<span class="tok-nt">&lt;/artifactId&gt;</span>
<span class="tok-w">  </span><span class="tok-nt">&lt;scope&gt;</span>provided<span class="tok-nt">&lt;/scope&gt;</span><span class="tok-w"> </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-nt">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It is in <code>provided</code> scope to make it available during compilation, so that the Micronaut annotation processor can
generate the corresponding beans, but it is not included in the final JAR since at runtime we will not use JPA but
Micronaut Data JDBC.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Create the following entity model:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/entity-model.png" alt="entity model">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Club</code> is a JPA entity, so it is annotated with <code>@Entity</code>. It is also annotated with <code>@Serdeable</code> so that it can be
serialized and deserialized by Micronaut Serialization.</p>
</li>
<li>
<p><code>ClubRepository</code> is a Micronaut Data JDBC repository. It extends <code>CrudRepository</code> so that it inherits the basic CRUD
operations. It is annotated with <code>@JdbcRepository</code> so that it is recognized by Micronaut Data JDBC. The <code>dialect</code>
attribute is set to <code>Dialect.POSTGRES</code> so that the queries generated at compile time work with PostgreSQL.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
In a real-world application, you should not expose your JPA entities directly to the outside world. Instead, you
should create DTOs (Data Transfer Objects) that represent the data you want to expose. This is a good practice to avoid
leaking implementation details and to have more control over the data you expose. In this exercise, we are exposing the
JPA entities directly for simplicity.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We can write a simple test to make sure everything is working as expected.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Create the following test:</p>
</div>
<details>
<summary class="title">Click to expand</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@MicronautTest</span>
<span class="tok-nd">@Sql</span><span class="tok-p">({</span><span class="tok-s">&quot;classpath:create.sql&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s">&quot;classpath:data.sql&quot;</span><span class="tok-p">})</span><span class="tok-w"> </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-nd">@Sql</span><span class="tok-p">(</span><span class="tok-n">scripts</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-s">&quot;classpath:clean.sql&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">phase</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-n">Sql</span><span class="tok-p">.</span><span class="tok-na">Phase</span><span class="tok-p">.</span><span class="tok-na">AFTER_ALL</span><span class="tok-p">)</span>
<span class="tok-kd">class</span> <span class="tok-nc">ClubRepositoryTest</span><span class="tok-w"> </span><span class="tok-p">{</span>

<span class="tok-w">    </span><span class="tok-nd">@Test</span>
<span class="tok-w">    </span><span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">testItWorks</span><span class="tok-p">(</span><span class="tok-n">ClubRepository</span><span class="tok-w"> </span><span class="tok-n">clubRepository</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-p">{</span><span class="tok-w"> </span><i class="conum" data-value="2"></i><b>(2)</b>
<span class="tok-w">        </span><span class="tok-kt">long</span><span class="tok-w"> </span><span class="tok-n">clubCount</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-n">clubRepository</span><span class="tok-p">.</span><span class="tok-na">count</span><span class="tok-p">();</span>
<span class="tok-w">        </span><span class="tok-n">assertEquals</span><span class="tok-p">(</span><span class="tok-mi">10</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">clubCount</span><span class="tok-p">);</span>
<span class="tok-w">    </span><span class="tok-p">}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@Sql</code> annotation is used to execute the SQL scripts before and after the test.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Micronaut can inject dependencies in test methods.</td>
</tr>
</table>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_implementing_the_rest_api_15_minutes">2.3. Implementing the REST API (15 minutes)</h3>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Create the following REST API:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/rest-api.png" alt="rest api">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ClubApi</code> is an API contract with REST operations. It will be implemented by <code>ClubController</code>, and a <code>ClubClient</code> we
will create later. For each method annotated with <code>@Get</code>, <code>@Post</code>, <code>@Put</code>, <code>@Delete</code>, etc., Micronaut will figure out
how to render the corresponding JSON response based on the return type, which can be POJOs or collections of POJOs,
or wrapped in <code>HttpResponse</code> when we need to customise the response (header, response codes, etc).</p>
</li>
<li>
<p><code>ClubController</code> is a Micronaut controller. It is annotated with <code>@Controller</code>, and uses <code>ClubRepository</code> to implement
the operations.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
In a real-world scenario, a controller should not interact directly with a repository. Instead, it should use a
service layer that encapsulates the business logic. This is a good practice to separate concerns and make the code more
testable. In this exercise, we are using the repository directly for simplicity.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>We can now write a functional test for this REST API. In this case, instead of using the low-level HTTP client, we are
going to use a declarative client. For this, we are going to leverage the <code>ClubApi</code> interface we have just created.</p>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Create the following test:</p>
</div>
<details>
<summary class="title">Click to expand</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="java"><span></span><span class="tok-nd">@MicronautTest</span>
<span class="tok-nd">@Sql</span><span class="tok-p">({</span><span class="tok-s">&quot;classpath:create.sql&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-s">&quot;classpath:data.sql&quot;</span><span class="tok-p">})</span>
<span class="tok-nd">@Sql</span><span class="tok-p">(</span><span class="tok-n">scripts</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-s">&quot;classpath:clean.sql&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">phase</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-n">Sql</span><span class="tok-p">.</span><span class="tok-na">Phase</span><span class="tok-p">.</span><span class="tok-na">AFTER_ALL</span><span class="tok-p">)</span>
<span class="tok-kd">class</span> <span class="tok-nc">ClubControllerTest</span><span class="tok-w"> </span><span class="tok-p">{</span>

<span class="tok-w">    </span><span class="tok-nd">@Inject</span>
<span class="tok-w">    </span><span class="tok-n">ClubClient</span><span class="tok-w"> </span><span class="tok-n">client</span><span class="tok-p">;</span><span class="tok-w"> </span><i class="conum" data-value="2"></i><b>(2)</b>

<span class="tok-w">    </span><span class="tok-nd">@Test</span>
<span class="tok-w">    </span><span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">testItCanListClubs</span><span class="tok-p">()</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">        </span><span class="tok-n">Iterable</span><span class="tok-o">&lt;</span><span class="tok-n">Club</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-n">clubs</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-n">client</span><span class="tok-p">.</span><span class="tok-na">list</span><span class="tok-p">();</span>

<span class="tok-w">        </span><span class="tok-n">assertFalse</span><span class="tok-p">(((</span><span class="tok-n">Collection</span><span class="tok-o">&lt;?&gt;</span><span class="tok-p">)</span><span class="tok-w"> </span><span class="tok-n">clubs</span><span class="tok-p">).</span><span class="tok-na">isEmpty</span><span class="tok-p">());</span>
<span class="tok-w">    </span><span class="tok-p">}</span>

<span class="tok-w">    </span><span class="tok-nd">@Test</span>
<span class="tok-w">    </span><span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">testItCanGetAClub</span><span class="tok-p">()</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">        </span><span class="tok-n">HttpResponse</span><span class="tok-o">&lt;</span><span class="tok-n">Club</span><span class="tok-o">&gt;</span><span class="tok-w"> </span><span class="tok-n">response</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-n">client</span><span class="tok-p">.</span><span class="tok-na">get</span><span class="tok-p">(</span><span class="tok-mi">1L</span><span class="tok-p">);</span>

<span class="tok-w">        </span><span class="tok-n">assertEquals</span><span class="tok-p">(</span><span class="tok-mi">200</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">response</span><span class="tok-p">.</span><span class="tok-na">code</span><span class="tok-p">());</span>

<span class="tok-w">        </span><span class="tok-n">Club</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-w"> </span><span class="tok-o">=</span><span class="tok-w"> </span><span class="tok-n">response</span><span class="tok-p">.</span><span class="tok-na">body</span><span class="tok-p">();</span>
<span class="tok-w">        </span><span class="tok-n">assertNotNull</span><span class="tok-p">(</span><span class="tok-n">club</span><span class="tok-p">);</span>
<span class="tok-w">        </span><span class="tok-n">assertEquals</span><span class="tok-p">(</span><span class="tok-s">&quot;Real Madrid&quot;</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">club</span><span class="tok-p">.</span><span class="tok-na">name</span><span class="tok-p">());</span>
<span class="tok-w">    </span><span class="tok-p">}</span>

<span class="tok-w">    </span><span class="tok-nd">@Test</span>
<span class="tok-w">    </span><span class="tok-kt">void</span><span class="tok-w"> </span><span class="tok-nf">itReturnsNotFoundForUnknownClub</span><span class="tok-p">()</span><span class="tok-w"> </span><span class="tok-p">{</span>
<span class="tok-w">        </span><span class="tok-n">assertEquals</span><span class="tok-p">(</span><span class="tok-mi">404</span><span class="tok-p">,</span><span class="tok-w"> </span><span class="tok-n">client</span><span class="tok-p">.</span><span class="tok-na">get</span><span class="tok-p">(</span><span class="tok-mi">100L</span><span class="tok-p">).</span><span class="tok-na">code</span><span class="tok-p">());</span>
<span class="tok-w">    </span><span class="tok-p">}</span>

<span class="tok-w">    </span><span class="tok-nd">@Client</span><span class="tok-p">(</span><span class="tok-s">&quot;/clubs&quot;</span><span class="tok-p">)</span><span class="tok-w"> </span><i class="conum" data-value="1"></i><b>(1)</b>
<span class="tok-w">    </span><span class="tok-kd">interface</span> <span class="tok-nc">ClubClient</span><span class="tok-w"> </span><span class="tok-kd">extends</span><span class="tok-w"> </span><span class="tok-n">ClubApi</span><span class="tok-w"> </span><span class="tok-p">{}</span>
<span class="tok-p">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>@Client</code> annotation is mapped to the same path as the controller. The implementation of this interface will be
generated by Micronaut at compile time.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>@Inject</code> annotation is used to inject an instance of the generated client.</td>
</tr>
</table>
</div>
</div>
</details>
<div class="paragraph">
<p>In order to see the HTTP requests and responses, and also the SQL queries, we can declare the following loggers:</p>
</div>
<div class="listingblock">
<div class="title"><code>src/main/resources/logback.xml</code></div>
<div class="content">
<pre class="pygments highlight"><code data-lang="xml"><span></span><span class="tok-nt">&lt;logger</span><span class="tok-w"> </span><span class="tok-na">name=</span><span class="tok-s">&quot;io.micronaut.data.query&quot;</span><span class="tok-w"> </span><span class="tok-na">level=</span><span class="tok-s">&quot;trace&quot;</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span>
<span class="tok-nt">&lt;logger</span><span class="tok-w"> </span><span class="tok-na">name=</span><span class="tok-s">&quot;io.micronaut.http.client&quot;</span><span class="tok-w"> </span><span class="tok-na">level=</span><span class="tok-s">&quot;trace&quot;</span><span class="tok-w"> </span><span class="tok-nt">/&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_completing_the_rest_api_15_minutes">2.4. Completing the REST API (15 minutes)</h3>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Using the knowledge acquired in the previous exercises, you can now complete the REST API by implementing the following
endpoints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>POST /clubs</code>: creates a new club.</p>
</li>
<li>
<p><code>PUT /clubs/{id}</code>: updates an existing club.</p>
</li>
<li>
<p><code>DELETE /clubs/{id}</code>: deletes an existing club.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="icon"><i class="fa fa-hand-o-right"></i></span> Augment the functional test to cover the new endpoints. Test also negative cases such as providing
non-existing IDs, or invalid payloads.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-05-19 20:16:44 +0200
</div>
</div>
</body>
</html>